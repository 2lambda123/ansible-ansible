---
- name: Default Configuration of INTELLASTORE2+
  hosts: apcon
  strategy: free
  gather_facts: false
  connection: network_cli
  vars:
     ansible_user: admin
     ansible_ssh_pass: secret

  tasks:
    - name: RUN 'Set NTP'
      apconos_command:
        commands:
          - configure service ntp 1.1.1.1 1 1111111 2.2.2.2 2 22222222 3.3.3.3 3 333333333
        #register: result
        #- debug: var=result.stdout_lines

    - name: RUN 'Set timezone'
      apconos_command:
        commands:
          # set timezone
          - configure time zone America/Los_Angeles
      register: result

    - name: RUN 'Disable audible alarms'
      apconos_command:
        commands:
          - configure global miscellaneous alarms false
      register: result

    - name: RUN 'Set syslog server'
      apconos_command:
        commands:
          - configure service syslog server 10.0.0.1
      register: result

    - name: RUN 'Require job ticket'
      apconos_command:
        commands:
          - configure connection requirements y  y y
      register: result

    - name: RUN 'Set packet size'
      apconos_command:
        commands:
          - configure global maxpacketsize 9600
      register: result

    - name: RUN 'Force https, disable redirect'
      apconos_command:
        commands:
          - configure service https  force y n
      register: result

    - name: RUN 'Set web session timeout to 1h'
      apconos_command:
        commands:
          - configure service web timeout 1 
      register: result

    - name: RUN 'Enable SSH'
      apconos_command:
        commands:
          - enable service ssh
          # enable SNMP
          - enable service snmp
      register: result

    - name: RUN 'Enable SNMP'
      apconos_command:
        commands:
          - enable service snmp
      register: result
