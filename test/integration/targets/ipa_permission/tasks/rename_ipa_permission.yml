---

- name: Rename a non-existent permission.
  block:
    - ipa_permission:
        cn: "NON_EXISTENT_PERMISSION"
        ipapermbindruletype: anonymous
        rename: "{{ ipa_permission_rename }}"
        state: present
        ipa_host: "{{ ipa_host }}"
        ipa_user: "{{ ipa_user }}"
        ipa_pass: "{{ ipa_pass }}"
        validate_certs: "{{ ipa_validate_certs }}"
      ignore_errors: true
      register: ipa_permission_output

    - assert:
        that:
          - ipa_permission_output.failed

- name: Rename a non-existent permission.
  block:
    - ipa_permission:
        cn: "{{ ipa_permission_cn }}"
        ipapermbindruletype: anonymous
        rename: "{{ ipa_permission_rename }}"
        state: present
        ipa_host: "{{ ipa_host }}"
        ipa_user: "{{ ipa_user }}"
        ipa_pass: "{{ ipa_pass }}"
        validate_certs: "{{ ipa_validate_certs }}"
      register: ipa_permission_output

    - assert:
        that:
          - ipa_permission_output.changed
