- name: Create or Update Recovery Services vault
      azure_rm_recoveryservicesvault:
        resource_group: "{{ resource_group }}"
        name: testVault
        sku:
          name: Standard
        location: "{{ location }}"  
  register: output

- assert:
    that: 
      - output.changed

- name: Get Info of Recovery Services Resource
      azure_rm_recoveryservicesvault_info:
        resource_group: "{{ resource_group }}"
        name: testVault
  register: output

- assert:
    that: 
      - not output.changed
      - output.vaults['id'] != None
      - output.vaults['name'] != None
      - output.vaults['location'] != None
      - output.vaults['e_tag'] != None
      - output.vaults['sku_name'] != None
      - output.vaults['provisioning_state'] != None

- name: Delete Recovery Services Vault
      azure_rm_recoveryservicesvault:
        resource_group: "{{ resource_group }}"
        name: testVault
        state: absent
   register: output

- assert:
    that: 
      - output.changed
