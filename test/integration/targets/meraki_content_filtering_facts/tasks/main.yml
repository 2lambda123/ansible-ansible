# Test code for the Meraki Admin module
# Copyright: (c) 2019, Kevin Breit (@kbreit)

# GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)
---
- block:
  - name: Query all content filtering information
    meraki_content_filtering_facts:
      auth_key: '{{auth_key}}'
    delegate_to: localhost
    register: query_all

  - name: Query all content filtering assertion
    assert:
      that:
        - query_all.data.categories is defined
        - query_all.data.policy is defined

  - name: Query categories
    meraki_content_filtering_facts:
      auth_key: '{{auth_key}}'
      subset: categories
    delegate_to: localhost
    register: query_categories

  - name: Query categories assertion
    assert:
      that:
        - query_categories.data is defined

  - name: Query content filtering policies
    meraki_content_filtering_facts:
      auth_key: '{{auth_key}}'
      subset: policy
    delegate_to: localhost
    register: query_policy

  - name: Query contnet filtering policy assertion
    assert:
      that:
        - query_policy.data is defined
