---
- name: Reset initial config
  cli_config:
    config: |
      interface Ethernet1
         description "Interface 1"
         no shutdown
         no mtu
         speed forced 40gfull
      interface Ethernet2
         no description
         no shutdown
         mtu 3000
         speed auto
      interface Management1
         description "Management interface"
         no shutdown
         no mtu
  become: yes

- eos_facts:
    gather_network_resources: interfaces
  become: yes

- set_fact:
    expected_output:
      - name: Ethernet1
        description: Interface 1
        speed: 40g
        duplex: full
        enabled: True
      - name: Ethernet2
        enabled: True
        mtu: "3000"
        duplex: auto
      - name: Management1
        description: Management interface
        enabled: True

- assert:
    that:
      - "ansible_facts.network_resources.interfaces|symmetric_difference(expected_output)|length == 0"
