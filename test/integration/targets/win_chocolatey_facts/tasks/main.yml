---
- name: ensure Chocolatey is installed
  win_chocolatey:
    name: chocolatey
    state: present

- name: Gather facts from chocolatey
  win_chocolatey_facts:

- name: assert facts from chocolatey
  assert:
    that:
    - ansible_facts.chocolatey is not changed
    - ansible_facts.chocolatey.config['commandExecutionTimeoutSeconds'] == '2700'
    - ansible_facts.chocolatey.feature['checksumFiles'] == true
