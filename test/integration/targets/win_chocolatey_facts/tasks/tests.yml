---
- name: Gather facts from chocolatey (check mode)
  win_chocolatey_facts:
  check_mode: true

- name: Displays the Configuration
  debug:
    var: ansible_facts.chocolatey

- name: assert facts from chocolatey (check mode)
  assert:
    that:
    - ansible_facts.chocolatey is not changed
    - ansible_facts.chocolatey.config['commandExecutionTimeoutSeconds'] == '2700'
    - ansible_facts.chocolatey.feature['checksumFiles'] == true

- name: Gather facts from chocolatey
  win_chocolatey_facts:

- name: assert facts from chocolatey
  assert:
    that:
    - ansible_facts.chocolatey is not changed
    - ansible_facts.chocolatey.config['commandExecutionTimeoutSeconds'] == '2700'
    - ansible_facts.chocolatey.feature['checksumFiles'] == true
