---
- name: Download hawt.io
  get_url:
    url: http://central.maven.org/maven2/io/hawt/hawtio-web/1.5.10/hawtio-web-1.5.10.war
    dest: /opt/hawtio.war
    mode: 0655
    checksum: md5:27b9f95d78b50e124b6b4e4f72f196f0

- name: Deploy hawt.io
  jboss_deployment:
    name: hawtio.war
    state: present
    src: /opt/hawtio.war
  environment:
    JBOSS_MANAGEMENT_USER: ansible
    JBOSS_MANAGEMENT_PASSWORD: ansible
    JBOSS_MANAGEMENT_HOST: "127.0.0.1"
    JBOSS_MANAGEMENT_PORT: 9990
  register: result

- name: assert output message that hawtio was deployed
  assert:
    that:
       - "result.changed == true"
       - "result.msg == 'Deployed hawtio.war'"
