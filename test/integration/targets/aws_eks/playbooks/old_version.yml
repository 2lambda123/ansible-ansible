- hosts: localhost
  connection: local

  tasks:
    - name: try and use aws_eks module
      aws_eks:
        state: absent
        name: my_cluster
      ignore_errors: yes
      register: aws_eks

    - name: ensure that aws_eks fails with friendly error message
      assert:
        that:
          - '"msg" in aws_eks'
          - aws_eks is failed
