- hosts: 127.0.0.1
  gather_facts: no
  connection: local
  tasks:
  - name: Allocate a new /31 block
    nttc_cis_ipam_public:
      region: na
      datacenter: NA12
      network_domain: myCND
      state: present
    register: ipam
    tags:
      - get_nextfree

  - debug:
      var: ipam
    tags:
      - get_nextfree

  - name: Get the next free public IPv4 address
    nttc_cis_ipam_public:
      region: na
      datacenter: NA12
      network_domain: myCND
      next_free_public_ipv4: False
      state: present
    register: ipam
    tags:
      - new_block

  - debug:
      var: ipam
    tags:
      - new_block

  - name: Delete a public IPv4 block by IP address
    nttc_cis_ipam_public:
      region: na
      datacenter: NA12
      network_domain: myCND
      ip_address: 168.128.31.152
      state: absent
    register: ipam
    tags:
      - delete_byip

  - debug:
      var: ipam
    tags:
      - delete_byip

  - name: Delete a public IPv4 block by UUID
    nttc_cis_ipam_public:
      region: na
      datacenter: NA12
      network_domain: myCND
      id: 62982f42-1425-11e5-8c14-b8ca3a5d9ef8
      state: absent
    register: ipam
    tags:
      - delete_byuuid

  - debug:
      var: ipam
    tags:
      - delete_byuuid
