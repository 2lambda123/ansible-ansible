- hosts: 127.0.0.1
  gather_facts: no
  connection: local
  tasks:
  - name: List all reserved private IPv4 addresses for a VLAN
    nttc_cis_ipam_info:
      region: na
      datacenter: NA12
      network_domain: myCND
      vlan: myVLAN
      reserved: True
      version: 4
    register: ipam
    tags:
      - list_reserved4

  - debug:
      var: ipam
    tags:
      - list_reserved4

  - name: List all reserved private IPv4 addresses for a CND
    nttc_cis_ipam_info:
      region: na
      datacenter: NA12
      network_domain: myCND
      reserved: True
      version: 4
    register: ipam
    tags:
      - list_reserved4_novlan

  - debug:
      var: ipam
    tags:
      - list_reserved4_novlan

  - name: List all reserved IPv6 addresses for a VLAN
    nttc_cis_ipam_info:
      region: na
      datacenter: NA12
      network_domain: myCND
      vlan: myVLAN
      reserved: True
      version: 6
    register: ipam
    tags:
      - list_reserved6

  - debug:
      var: ipam
    tags:
      - list_reserved6

  - name: List all public IPv4 blocks for a CND
    nttc_cis_ipam_info:
      region: na
      datacenter: NA12
      network_domain: myCND
    register: ipam
    tags:
      - list_public

  - debug:
      var: ipam
    tags:
      - list_public

  - name: Get a public IPv4 block by IP address
    nttc_cis_ipam_info:
      region: na
      datacenter: NA12
      network_domain: myCND
      public_ip_address: 168.128.31.151
    register: ipam
    tags:
      - get_publicip

  - debug:
      var: ipam
    tags:
      - get_publicip

  - name: Get a public IPv4 block by UUID
    nttc_cis_ipam_info:
      region: na
      datacenter: NA12
      network_domain: myCND
      id: 62982830-1425-11e5-8c14-b8ca3a5d9ef8
    register: ipam
    tags:
      - get_publicid

  - debug:
      var: ipam
    tags:
      - get_publicid
