---
merged:
  before:
    - name: Loopback888
    - name: Loopback999
    - name: GigabitEthernet0/0/0/1

  commands:
    - interface GigabitEthernet0/0/0/1
    - dot1q native vlan 10
    - l2transport l2protocol pvst tunnel
    - l2transport l2protocol cdp forward
    - l2transport propagate remote-status
    - interface GigabitEthernet0/0/0/3.900
    - dot1q vlan 20 40

  after:
    - name: Loopback888
    - name: Loopback999
    - l2protocol:
      - cdp: forward
      - pvst: tunnel
      l2transport: true
      name: GigabitEthernet0/0/0/1
      native_vlan: 10
      propagate: true
    - name: preconfigure GigabitEthernet0/0/0/3.900
      q_vlan:
      - 20
      - 40

replaced:
  before:
    - name: Loopback888
    - name: Loopback999
    - l2protocol:
      - cdp: forward
      l2transport: true
      name: GigabitEthernet0/0/0/1
      native_vlan: 10
      propagate: true
    - name: preconfigure GigabitEthernet0/0/0/3.900
      q_vlan:
      - 40
      - 60
    - l2protocol:
      - vtp: tunnel
      l2transport: true
      name: GigabitEthernet0/0/0/4
      native_vlan: 20

  commands:
    - interface GigabitEthernet0/0/0/1
    - no l2transport
    - dot1q native vlan 40
    - l2transport l2protocol vtp tunnel

  after:
    - name: Loopback888
    - name: Loopback999
    - l2protocol:
      - vtp: tunnel
      l2transport: true
      name: GigabitEthernet0/0/0/1
      native_vlan: 40
    - name: preconfigure GigabitEthernet0/0/0/3.900
      q_vlan:
      - 40
      - 60
    - l2protocol:
      - vtp: tunnel
      l2transport: true
      name: GigabitEthernet0/0/0/4
      native_vlan: 20

overridden:
  before:
    - name: Loopback888
    - name: Loopback999
    - l2protocol:
      - cdp: forward
      l2transport: true
      name: GigabitEthernet0/0/0/1
      native_vlan: 10
      propagate: true
    - name: preconfigure GigabitEthernet0/0/0/3.900
      q_vlan:
      - 40
      - 60
    - l2protocol:
      - vtp: tunnel
      l2transport: true
      name: GigabitEthernet0/0/0/4
      native_vlan: 20

  commands:
    - interface GigabitEthernet0/0/0/1
    - no dot1q native vlan
    - no l2transport
    - interface GigabitEthernet0/0/0/4
    - no l2transport
    - dot1q native vlan 40
    - l2transport l2protocol stp forward
    - interface preconfigure GigabitEthernet0/0/0/3.900
    - dot1q vlan 20 40

  after:
    - name: Loopback888
    - name: Loopback999
    - name: GigabitEthernet0/0/0/1
    - name: preconfigure GigabitEthernet0/0/0/3.900
      q_vlan:
      - 20
      - 40
    - name: GigabitEthernet0/0/0/4
      native_vlan: 40

deleted:
  before:
    - name: Loopback888
    - name: Loopback999
    - l2protocol:
      - cdp: forward
      l2transport: true
      name: GigabitEthernet0/0/0/1
      native_vlan: 10
      propagate: true
    - name: preconfigure GigabitEthernet0/0/0/3.900
      q_vlan:
      - 40
      - 60
    - l2protocol:
      - vtp: tunnel
      l2transport: true
      name: GigabitEthernet0/0/0/4
      native_vlan: 20

  commands:
    - interface GigabitEthernet0/0/0/1
    - no dot1q native vlan
    - no l2transport
    - interface GigabitEthernet0/0/0/4
    - no dot1q vlan
    - interface preconfigure GigabitEthernet0/0/0/3.900
    - no encapsulation dot1q

  after:
    - name: Loopback888
    - name: Loopback999
    - name: GigabitEthernet0/0/0/1
    - name: preconfigure GigabitEthernet0/0/0/3.900
