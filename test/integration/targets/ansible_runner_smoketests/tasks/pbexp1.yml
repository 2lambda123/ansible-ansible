- name: send the playbook script
  #uri:
  #  method: POST
  #  url: "{{ runner_container_url + '/upload_file' }}" 
  #  body: "{{ lookup('file','playbook_example1.py') }}"
  #set_fact: 
  #  pwd: "{{ lookup('pipe', 'pwd') }}"
  shell: "{{ 'curl -X POST -F \"file=@' + role_path + '/files/' + 'playbook_example1.py\" ' + runner_container_url + '/upload_file' }}"

- debug: var=pwd
- debug: var=role_path

- name: check the script
  uri:
    method: POST
    url: "{{ runner_container_url + '/run_command' }}" 
    body_format: json
    body:
        command: ls -al /tmp/uploads

- name: execute the script
  uri:
    method: POST
    url: "{{ runner_container_url + '/execute_file' }}" 
    body_format: json
    body:
        filename: playbook_example1.py
