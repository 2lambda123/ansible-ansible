---
# tasks file for test.win_chocolatey_pin

- name: pin firefox (check mode)
  win_chocolatey_pin:
    name: firefox
  register: register_pin_firefox
  check_mode: true

- name: assert pin firefox (check mode)
  assert:
    that:
    - register_pin_firefox is changed
 
- name: pin firefox
  win_chocolatey_pin:
    name: firefox
  register: register_pin_firefox

- name: assert pin firefox 
  assert:
    that:
    - register_pin_firefox is changed

- name: failed invalid packges (check mode)
  win_chocolatey_pin:
    name: fake
  register: register_failed_invalid_packages
  check_mode: true

- name: assert failed invalid packages (check mode)
  assert:
    that:
    - register_failed_invalid_packages is changed

- name: failed invalid packges
  win_chocolatey_pin:
    name: fake
  register: register_failed_invalid_packages
  ignore_errors: true

- name: assert failed invalid packages
  assert:
    that:
    - register_failed_invalid_packages is changed
  ignore_errors: true

- name: remove Pin firefox (check mode)
  win_chocolatey_pin:
    name: firefox
    state: unpinned
  register: register_remove_pin_firefox
  check_mode: true

- name: assert pin firefox (check mode)
  assert:
    that:
    - register_remove_pin_firefox is changed

- name: remove pin firefox
  win_chocolatey_pin:
    name: firefox
    state: unpinned
  register: register_remove_pin_firefox

- name: assert pin firefox
  assert:
    that:
    - register_remove_pin_firefox is changed