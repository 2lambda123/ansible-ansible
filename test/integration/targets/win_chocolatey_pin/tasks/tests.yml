---
# tasks file for test.win_chocolatey_pin

- name: pin putty (check mode)
  win_chocolatey_pin:
    name: putty
  register: register_pin_putty
  check_mode: true

- name: assert pin putty (check mode)
  assert:
    that:
    - register_pin_putty is changed
 
- name: pin putty
  win_chocolatey_pin:
    name: putty
  register: register_pin_putty

- name: assert pin putty 
  assert:
    that:
    - register_pin_putty is changed

- name: failed invalid packges (check mode)
  win_chocolatey_pin:
    name: fake
  register: register_failed_invalid_packages
  check_mode: true

- name: assert failed invalid packages (check mode)
  assert:
    that:
    - register_failed_invalid_packages is changed

- name: failed invalid packges
  win_chocolatey_pin:
    name: fake
  register: register_failed_invalid_packages
  ignore_errors: true

- name: assert failed invalid packages
  assert:
    that:
    - register_failed_invalid_packages is changed
  ignore_errors: true

- name: remove Pin putty (check mode)
  win_chocolatey_pin:
    name: putty
    state: unpinned
  register: register_remove_pin_putty
  check_mode: true

- name: assert pin putty (check mode)
  assert:
    that:
    - register_remove_pin_putty is changed

- name: remove pin putty
  win_chocolatey_pin:
    name: putty
    state: unpinned
  register: register_remove_pin_putty

- name: assert pin putty
  assert:
    that:
    - register_remove_pin_putty is changed
