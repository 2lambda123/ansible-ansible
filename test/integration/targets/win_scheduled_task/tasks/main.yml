# NOTE: The win_scheduled_task module only works on Win2012+

- name: Test in normal mode (only run on Win2012+)
  when: "'windows-2008' not in inventory_hostname"
  block:
  - include: tests.yml

  - name: Check the various tasks in normal mode
    assert:
      that:
      - add_scheduled_task.changed == true
      - add_scheduled_task.exists == false
      - add_scheduled_task_again.changed == false
      - add_scheduled_task_again.exists == true
      - remove_scheduled_task.changed == true
      - remove_scheduled_task.exists == true
      - remove_scheduled_task_again.changed == false
      - remove_scheduled_task_again.exists == false


- name: Test in check-mode (only run on Win2012+)
  check_mode: yes
  when: "'windows-2008' not in inventory_hostname"
  block:
  - include: tests.yml

  - name: Check the various tests in check-mode
    assert:
      that:
      - add_scheduled_task.changed == true
      - add_scheduled_task.exists == false
      - add_scheduled_task_again.changed == true
      - add_scheduled_task_again.exists == false
      - remove_scheduled_task.changed == false
      - remove_scheduled_task.exists == false
      - remove_scheduled_task_again.changed == false
      - remove_scheduled_task_again.exists == false
