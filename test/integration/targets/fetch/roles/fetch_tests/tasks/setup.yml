- name: Create test user
  user:
    name: fetcher
    create_home: yes
  become: yes
  notify:
    - remove test user

- name: Create a file that we can use to fetch
  copy:
    content: "test"
    dest: "{{ remote_tmp_dir }}/orig"

- name: Create symlink to a file that we can fetch
  file:
    path: "{{ remote_tmp_dir }}/link"
    src: "{{ remote_tmp_dir }}/orig"
    state: "link"

- name: Create an inaccessible directory
  file:
    path: "{{ remote_tmp_dir }}/noaccess"
    state: directory
    mode: '0600'
    owner: root
  become: yes
