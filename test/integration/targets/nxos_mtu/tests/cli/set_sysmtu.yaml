---
- debug: msg="START cli/sysmtu.yaml"

- name: setup
  nxos_config:
    lines: no system jumbomtu
    match: none
    provider: "{{ cli }}"

- name: configure system mtu
  nxos_mtu:
    sysmtu: 2000
    provider: "{{ cli }}"
<<<<<<< HEAD
=======
    transport: nxapi
>>>>>>> 885db0c1c2... pull latest
  register: result

- assert:
    that:
      - "result.changed == true"

- name: verify system mtu
  nxos_mtu:
    sysmtu: 2000
    provider: "{{ cli }}"
  register: result

- assert:
    that:
      - "result.changed == false"

<<<<<<< HEAD
- name: configure invalid (odd) system mtu
=======
- name: update system mtu
>>>>>>> 885db0c1c2... pull latest
  nxos_mtu:
    sysmtu: 2001
    provider: "{{ cli }}"
  register: result
<<<<<<< HEAD
  ignore_errors: yes

- assert:
    that:
      - "result.failed == true"

- name: configure invalid (large) system mtu setting
  nxos_mtu:
    sysmtu: 10000
=======

- assert:
    that:
      - "result.changed == true"

- name: verify system mtu
  nxos_mtu:
    sysmtu: 2001
    provider: "{{ cli }}"
  register: result

- assert:
    that:
      - "result.changed == false"

- name: invalid setting
  nxos_mtu:
    sysmtu: 3000
>>>>>>> 885db0c1c2... pull latest
    provider: "{{ cli }}"
  register: result
  ignore_errors: yes

- assert:
    that:
      - "result.failed == true"

- name: teardown
  nxos_config:
    lines: no system jumbomtu
    match: none
    provider: "{{ cli }}"

- debug: msg="END cli/sysmtu.yaml"
