---
- hosts: testhost
  vars_files:
    - vars/test_hash_vars.yml
  vars:
    test_hash:
      playbook_vars: "this is a playbook variable"
      test_list:
        - name: "this is a playbook variable"
    replaced_hash_replaced_list:
      extra_args: "this is an extra arg"
      test_list:
        - name: "this is an extra arg"
    replaced_hash_merged_list:
      extra_args: "this is an extra arg"
      test_list:
        - name: "this is an extra arg"
    merged_hash_merged_list:
      default_vars: "this is in role defaults/main.yml"
      extra_args: "this is an extra arg"
      group_vars_all: "this is in group_vars/all"
      host_vars_testhost: "this is in host_vars/testhost"
      playbook_vars: "this is a playbook variable"
      role_argument: "this is a role argument variable"
      role_vars: "this is in role vars/main.yml"
      vars_file: "this is in a vars_file"
      test_list:
        - name: "this is in role defaults/main.yml"
        - name: "this is in group_vars/all"
        - name: "this is in host_vars/testhost"
        - name: "this is a playbook variable"
        - name: "this is in a vars_file"
        - name: "this is in role vars/main.yml"
        - name: "this is a role argument variable"
        - name: "this is an extra arg"
    merged_hash_replaced_list:
      default_vars: "this is in role defaults/main.yml"
      extra_args: "this is an extra arg"
      group_vars_all: "this is in group_vars/all"
      host_vars_testhost: "this is in host_vars/testhost"
      playbook_vars: "this is a playbook variable"
      role_argument: "this is a role argument variable"
      role_vars: "this is in role vars/main.yml"
      vars_file: "this is in a vars_file"
      test_list:
        - name: "this is an extra arg"
  roles:
  - { role: test_hash_behavior, test_hash: {'role_argument':'this is a role argument variable', 'test_list':[{'name':'this is a role argument variable'}] } }
