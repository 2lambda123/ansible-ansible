- hosts: 127.0.0.1
  gather_facts: no
  connection: local
  tasks:
  - name: Create a port list
    ntt_mcp_port_list:
      region: na
      datacenter: NA12
      network_domain: myCND
      name: myPortList
      description: "API Testing"
      ports:
        - port_begin: 80
        - port_begin: 443
          port_end: 444
      state: present
    register: port
    tags:
      - create

  - debug:
      var: port
    tags:
      - create

  - name: Create a duplicate port list
    ntt_mcp_port_list:
      region: na
      datacenter: NA12
      network_domain: myCND
      name: myPortList
      description: "API Testing"
      ports:
        - port_begin: 80
        - port_begin: 443
          port_end: 444
      state: present
    register: port
    tags:
      - create_duplicate

  - debug:
      var: port
    tags:
      - create_duplicate

  - name: Create an invalid port list
    ntt_mcp_port_list:
      region: na
      datacenter: NA12
      network_domain: myCND
      name: myPortList_invalid
      description: "API Testing Invalid Data"
      state: present
    register: port
    tags:
      - create_invalid

  - debug:
      var: port
    tags:
      - create_invalid

  - name: Create a port list with a child port list
    ntt_mcp_port_list:
      region: na
      datacenter: NA12
      network_domain: myCND
      name: myPortList2
      description: "API Testing2"
      ports:
        - port_begin: 1077
        - port_begin: 1177
          port_end: 1277
      child_port_lists:
        - myPortList
      state: present
    register: port
    tags:
      - create_with_child

  - debug:
      var: port
    tags:
      - create_with_child

  - name: Update a port list
    ntt_mcp_port_list:
      region: na
      datacenter: NA12
      network_domain: myCND
      name: myPortList2
      description: "API Testing2_new"
      ports:
        - port_begin: 1200
        - port_begin: 1177
          port_end: 1500
      child_port_lists_nil: True
      state: present
    register: port
    tags:
      - update

  - debug:
      var: port
    tags:
      - update

  - name: Delete myPortList2
    ntt_mcp_port_list:
      region: na
      datacenter: NA12
      network_domain: myCND
      name: myPortList2
      state: absent
    register: port
    tags:
      - delete_myPortList2

  - debug:
      var: port
    tags:
      - delete_myPortList2

  - name: Delete a non-existent port list
    ntt_mcp_port_list:
      region: na
      datacenter: NA12
      network_domain: myCND
      name: xyz
      state: absent
    register: port
    tags:
      - delete_noexist

  - debug:
      var: port
    tags:
      - delete_noexist
