- hosts: 127.0.0.1
  connection: local
  tasks:
  - name: Create an Attached VLAN
    nttc_cis_vlan:
      region: na
      datacenter: NA12
      network_domain: myCND
      name: myVLAN
      ipv4_network_address: "10.1.77.0"
      ipv4_prefix_size: 24
      state: present
    register: vlan
    tags:
      - create_attached

  - debug:
      var: vlan
    tags:
      - create_attached

  - name: Create a Detached VLAN
    nttc_cis_vlan:
      region: na
      datacenter: NA12
      network_domain: myCND
      name: myVLAN2
      ipv4_network_address: "10.1.78.0"
      ipv4_prefix_size: 24
      vlan_type: detachedVlan
      detached_vlan_gw: "10.1.78.1"
      state: present
    register: vlan
    tags:
      - create_detached

  - debug:
      var: vlan
    tags:
      - create_detached

  - name: Update a VLAN
    nttc_cis_vlan:
      region: na
      datacenter: NA12
      network_domain: myCND
      name: myVLAN2
      ipv4_network_address: "10.1.78.0"
      ipv4_prefix_size: 24
      vlan_type: "detachedVlan"
      detached_vlan_gw: "10.1.77.2"
      new_name: myVLAN3
      state: present
    register: vlan
    tags:
      - update

  - debug:
      var: vlan
    tags:
      - update

  - name: Delete a VLAN
    nttc_cis_vlan:
      region: na
      datacenter: NA12
      network_domain: myCND
      name: myVLAN3
      state: absent
    register: vlan
    tags:
      - delete

  - debug:
      var: vlan
    tags:
      - delete
