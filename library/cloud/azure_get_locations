#!/usr/bin/python
from azure.servicemanagement import *
from ansible.module_utils.azure import *

import json


def get_locations(module):
    sms = Azure.get_sms(module)
    locations = {}
    for location in sms.list_locations():
        locations[location.name] = {
            "location_name" : location.name,
            "location_display_name" : location.display_name,
            "location_services" : location.available_services
        }
    return locations


def main():
    module = AnsibleModule(
        argument_spec= Azure.common_argument_spec())


    module.exit_json(msg="List locations complete", locations=get_locations(module))

# import module snippets
from ansible.module_utils.basic import *

main()