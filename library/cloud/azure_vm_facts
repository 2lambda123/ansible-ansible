#!/usr/bin/python
from azure.servicemanagement import *
from ansible.module_utils.azure import *

import json

def main():
    argument_spec = azure_common_argument_spec()
    argument_spec.update(dict(
    name=dict(aliases=['NAME'], type='str'),
    cloud_service_name=dict(aliases=['CLOUD_SERVICE_NAME'], type='str')))
    module=AnsibleModule(argument_spec=argument_spec)

    sms = Azure.get_sms(module)
    cloud_service_name=module.params.get('cloud_service_name')
    name=module.params.get('name')
    props = sms.get_deployment_by_name(cloud_service_name, name)
    module.exit_json(vm_facts=azure_props_to_dict(props))


# import module snippets
from ansible.module_utils.basic import *

main()
